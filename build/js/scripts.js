function FastClick(i,t){"use strict";var e;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=i,this.tapDelay=t.tapDelay||200,!FastClick.notNeeded(i)){for(var n=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=0,o=n.length;r<o;r++)this[n[r]]=a(this[n[r]],this);deviceIsAndroid&&(i.addEventListener("mouseover",this.onMouse,!0),i.addEventListener("mousedown",this.onMouse,!0),i.addEventListener("mouseup",this.onMouse,!0)),i.addEventListener("click",this.onClick,!0),i.addEventListener("touchstart",this.onTouchStart,!1),i.addEventListener("touchmove",this.onTouchMove,!1),i.addEventListener("touchend",this.onTouchEnd,!1),i.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(i.removeEventListener=function(t,e,n){var r=Node.prototype.removeEventListener;"click"===t?r.call(i,t,e.hijacked||e,n):r.call(i,t,e,n)},i.addEventListener=function(t,e,n){var r=Node.prototype.addEventListener;"click"===t?r.call(i,t,e.hijacked||(e.hijacked=function(t){t.propagationStopped||e(t)}),n):r.call(i,t,e,n)}),"function"==typeof i.onclick&&(e=i.onclick,i.addEventListener("click",function(t){e(t)},!1),i.onclick=null)}function a(t,e){return function(){return t.apply(e,arguments)}}}!function(){var S={version:"3.4.13"};function t(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function y(){this._=Object.create(null)}S.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(n=t[i])&&n<=n);)n=void 0;for(;++i<o;)null!=(r=t[i])&&n<r&&(n=r)}else{for(;++i<o&&!(null!=(n=e.call(t,t[i],i))&&n<=n);)n=void 0;for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n<r&&(n=r)}return n},S.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(n=t[i])&&n<=n);)n=void 0;for(;++i<o;)null!=(r=t[i])&&r<n&&(n=r)}else{for(;++i<o&&!(null!=(n=e.call(t,t[i],i))&&n<=n);)n=void 0;for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r<n&&(n=r)}return n},S.map=function(t){var n=new y;if(t instanceof y)t.forEach(function(t,e){n.set(t,e)});else for(var e in t)n.set(e,t[e]);return n};var e="__proto__",n="\0";function r(t){return(t+="")===e||t[0]===n?n+t:t}function i(t){return(t+="")[0]===n?t.slice(1):t}function o(t){return r(t)in this._}function a(t){return(t=r(t))in this._&&delete this._[t]}function u(){var t=[];for(var e in this._)t.push(i(e));return t}function s(){var t=0;for(var e in this._)++t;return t}function c(){for(var t in this._)return!1;return!0}function l(){this._=Object.create(null)}t(y,{has:o,get:function(t){return this._[r(t)]},set:function(t,e){return this._[r(t)]=e},remove:a,keys:u,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:i(e),value:this._[e]});return t},size:s,empty:c,forEach:function(t){for(var e in this._)t.call(this,i(e),this._[e])}}),S.set=function(t){var e=new l;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},t(l,{has:o,add:function(t){return this._[r(t+="")]=!0,t},remove:a,values:u,size:s,empty:c,forEach:function(t){for(var e in this._)t.call(this,i(e))}});var f,h=[].slice,d=function(t){return h.call(t)},p=document,g=p.documentElement,v=window;try{d(g.childNodes)[0].nodeType}catch(t){d=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}function m(t){return t}function _(e,n,r){return function(){var t=r.apply(n,arguments);return t===n?e:t}}function w(){}function b(i){var o=[],a=new y;function t(){for(var t,e=o,n=-1,r=e.length;++n<r;)(t=e[n].on)&&t.apply(this,arguments);return i}return t.on=function(t,e){var n,r=a.get(t);return arguments.length<2?r&&r.on:(r&&(r.on=null,o=o.slice(0,n=o.indexOf(r)).concat(o.slice(n+1)),a.remove(t)),e&&o.push(a.set(t,{on:e})),i)},t}function k(i,o,a,t){var n,u={},s=S.dispatch("beforesend","progress","load","error"),c={},l=new XMLHttpRequest,f=null;function e(){var t,e,n,r=l.status;if(!r&&((n=(e=l).responseType)&&"text"!==n?e.response:e.responseText)||200<=r&&r<300||304===r){try{t=a.call(u,l)}catch(t){return void s.error.call(u,t)}s.load.call(u,t)}else s.error.call(u,l)}return!v.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(i)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()},l.onprogress=function(t){var e=S.event;S.event=t;try{s.progress.call(u,l)}finally{S.event=e}},u.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?c[t]:(null==e?delete c[t]:c[t]=e+"",u)},u.mimeType=function(t){return arguments.length?(o=null==t?null:t+"",u):o},u.responseType=function(t){return arguments.length?(f=t,u):f},u.response=function(t){return a=t,u},["get","post"].forEach(function(t){u[t]=function(){return u.send.apply(u,[t].concat(d(arguments)))}}),u.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),l.open(t,i,!0),null==o||"accept"in c||(c.accept=o+",*/*"),l.setRequestHeader)for(var r in c)l.setRequestHeader(r,c[r]);return null!=o&&l.overrideMimeType&&l.overrideMimeType(o),null!=f&&(l.responseType=f),null!=n&&u.on("error",n).on("load",function(t){n(null,t)}),s.beforesend.call(u,l),l.send(null==e?null:e),u},u.abort=function(){return l.abort(),u},S.rebind(u,s,"on"),null==t?u:u.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}S.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=_(t,e,e[n]);return t},S.dispatch=function(){for(var t=new w,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=b(t);return t},w.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(0<=n&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},S.xhr=(f=m,function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),k(t,e,f,n)}),S.dsv=function(i,o){var e=new RegExp('["'+i+"\n]"),h=i.charCodeAt(0);function a(t,e,n){arguments.length<3&&(n=e,e=null);var r=k(t,o,null==e?u:s(e),n);return r.row=function(t){return arguments.length?r.response(null==(e=t)?u:s(t)):e},r}function u(t){return a.parse(t.responseText)}function s(e){return function(t){return a.parse(t.responseText,e)}}function n(t){return t.map(c).join(i)}function c(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,r){var i;return a.parseRows(t,function(t,e){if(i)return i(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=r?function(t,e){return r(n(t),e)}:n})},a.parseRows=function(i,t){var e,o,a={},u={},n=[],s=i.length,c=0,r=0;function l(){if(s<=c)return u;if(o)return o=!1,a;var t=c;if(34===i.charCodeAt(t)){for(var e=t;e++<s;)if(34===i.charCodeAt(e)){if(34!==i.charCodeAt(e+1))break;++e}return c=e+2,13===(n=i.charCodeAt(e+1))?(o=!0,10===i.charCodeAt(e+2)&&++c):10===n&&(o=!0),i.slice(t+1,e).replace(/""/g,'"')}for(;c<s;){var n,r=1;if(10===(n=i.charCodeAt(c++)))o=!0;else if(13===n)o=!0,10===i.charCodeAt(c)&&(++c,++r);else if(n!==h)continue;return i.slice(t,c-r)}return i.slice(t)}for(;(e=l())!==u;){for(var f=[];e!==a&&e!==u;)f.push(e),e=l();t&&null==(f=t(f,r++))||n.push(f)}return n},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var n=new l,r=[];return t.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(c).join(i)].concat(t.map(function(e){return r.map(function(t){return c(e[t])}).join(i)})).join("\n")},a.formatRows=function(t){return t.map(n).join("\n")},a},S.csv=S.dsv(",","text/csv");var M=Math.abs;function x(){}function C(t,e,n){return this instanceof C?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof C?new C(t.h,t.s,t.l):G(""+t,K,C):new C(t,e,n)}S.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=function(t){var e=1;for(;t*e%1;)e*=10;return e}(M(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},(S.color=x).prototype.toString=function(){return this.rgb()+""};var T=(S.hsl=C).prototype=new x;function E(t,e,n){var r,i;function o(t){return Math.round(255*(360<(e=t)?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r));var e}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:1<e?1:e,r=2*(n=n<0?0:1<n?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new $(o(t+120),o(t),o(t-120))}T.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new C(this.h,this.s,this.l/t)},T.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new C(this.h,this.s,t*this.l)},T.rgb=function(){return E(this.h,this.s,this.l)};var A=Math.PI,N=2*A,I=A/2,F=A/180,L=180/A;function D(t,e,n){return this instanceof D?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof D?new D(t.h,t.c,t.l):U(t instanceof Y?t.l:(t=Q((t=S.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new D(t,e,n)}var O=(S.hcl=D).prototype=new x;function q(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Y(n,Math.cos(t*=F)*e,Math.sin(t)*e)}function Y(t,e,n){return this instanceof Y?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Y?new Y(t.l,t.a,t.b):t instanceof D?q(t.h,t.c,t.l):Q((t=$(t)).r,t.g,t.b):new Y(t,e,n)}O.brighter=function(t){return new D(this.h,this.c,Math.min(100,this.l+P*(arguments.length?t:1)))},O.darker=function(t){return new D(this.h,this.c,Math.max(0,this.l-P*(arguments.length?t:1)))},O.rgb=function(){return q(this.h,this.c,this.l).rgb()},S.lab=Y;var P=18,H=.95047,z=1,j=1.08883,R=Y.prototype=new x;function U(t,e,n){return 0<t?new D(Math.atan2(n,e)*L,Math.sqrt(e*e+n*n),t):new D(NaN,NaN,t)}function X(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function B(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function W(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function $(t,e,n){return this instanceof $?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof $?new $(t.r,t.g,t.b):G(""+t,$,E):new $(t,e,n)}function Z(t){return new $(t>>16,t>>8&255,255&t)}R.brighter=function(t){return new Y(Math.min(100,this.l+P*(arguments.length?t:1)),this.a,this.b)},R.darker=function(t){return new Y(Math.max(0,this.l-P*(arguments.length?t:1)),this.a,this.b)},R.rgb=function(){return t=this.l,e=this.a,n=this.b,o=(r=(t+16)/116)-n/200,i=X(i=r+e/500)*H,r=X(r)*z,o=X(o)*j,new $(W(3.2404542*i-1.5371385*r-.4985314*o),W(-.969266*i+1.8760108*r+.041556*o),W(.0556434*i-.2040259*r+1.0572252*o));var t,e,n,r,i,o};var J=(S.rgb=$).prototype=new x;function V(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function G(t,e,n){var r,i,o,a=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(et(i[0]),et(i[1]),et(i[2]))}return(o=nt.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,s=15&o,s|=s<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,s=255&o)),e(a,u,s))}function K(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),u=a-o,s=(a+o)/2;return u?(i=s<.5?u/(a+o):u/(2-a-o),r=t==a?(e-n)/u+(e<n?6:0):e==a?(n-t)/u+2:(t-e)/u+4,r*=60):(r=NaN,i=0<s&&s<1?0:r),new C(r,i,s)}function Q(t,e,n){var r=B((.4124564*(t=tt(t))+.3575761*(e=tt(e))+.1804375*(n=tt(n)))/H),i=B((.2126729*t+.7151522*e+.072175*n)/z);return Y(116*i-16,500*(r-i),200*(i-B((.0193339*t+.119192*e+.9503041*n)/j)))}function tt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function et(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}J.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b;return e||n||r?(e&&e<30&&(e=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new $(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new $(30,30,30)},J.darker=function(t){return new $((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},J.hsl=function(){return K(this.r,this.g,this.b)},J.toString=function(){return"#"+V(this.r)+V(this.g)+V(this.b)};var nt=S.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function rt(t,e){t=S.rgb(t),e=S.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,u=e.b-i;return function(t){return"#"+V(Math.round(n+o*t))+V(Math.round(r+a*t))+V(Math.round(i+u*t))}}function it(t,e){var n,r={},i={};for(n in t)n in e?r[n]=lt(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function ot(t,e){var n,r=[],i=[],o=t.length,a=e.length,u=Math.min(t.length,e.length);for(n=0;n<u;++n)r.push(lt(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<u;++n)i[n]=r[n](t);return i}}function at(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function ut(t,r){var e,n,i,o=st.lastIndex=ct.lastIndex=0,a=-1,u=[],s=[];for(t+="",r+="";(e=st.exec(t))&&(n=ct.exec(r));)(i=n.index)>o&&(i=r.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(n=n[0])?u[a]?u[a]+=n:u[++a]=n:(u[++a]=null,s.push({i:a,x:at(e,n)})),o=ct.lastIndex;return o<r.length&&(i=r.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?(r=s[0].x,function(t){return r(t)+""}):function(){return r}:(r=s.length,function(t){for(var e,n=0;n<r;++n)u[(e=s[n]).i]=e.x(t);return u.join("")})}nt.forEach(function(t,e){nt.set(t,Z(e))}),S.interpolateRgb=rt,S.interpolateObject=it,S.interpolateArray=ot,S.interpolateNumber=at,S.interpolateString=ut;var st=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ct=new RegExp(st.source,"g");function lt(t,e){for(var n,r=S.interpolators.length;0<=--r&&!(n=S.interpolators[r](t,e)););return n}function ft(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function ht(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function dt(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function pt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}S.interpolate=lt,S.interpolators=[function(t,e){var n=typeof e;return("string"==n?nt.has(e)||/^(#|rgb\(|hsl\()/.test(e)?rt:ut:e instanceof x?rt:Array.isArray(e)?ot:"object"==n&&isNaN(e)?it:at)(t,e)}],S.interpolateRound=ft,S.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var gt=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*M(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});S.formatPrefix=function(t,e){var n=0;return t&&(t<0&&(t*=-1),e&&(t=S.round(t,pt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),gt[8+n/3]};var vt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,mt=S.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=S.round(t,pt(t,e))).toFixed(Math.max(0,Math.min(20,pt(t*(1+1e-15),e))))}});function yt(t){return t+""}S.requote=function(t){return t.replace(_t,"\\$&")};var _t=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,wt=S.time={},bt=Date;function kt(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}kt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Mt.setUTCDate.apply(this._,arguments)},setDay:function(){Mt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Mt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Mt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Mt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Mt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Mt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Mt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Mt.setTime.apply(this._,arguments)}};var Mt=Date.prototype;function xt(r,o,a){function t(t){var e=r(t),n=i(e,1);return t-e<n-t?e:n}function u(t){return o(t=r(new bt(t-1)),1),t}function i(t,e){return o(t=new bt(+t),e),t}function s(t,e,n){var r=u(t),i=[];if(1<n)for(;r<e;)a(r)%n||i.push(new Date(+r)),o(r,1);else for(;r<e;)i.push(new Date(+r)),o(r,1);return i}(r.floor=r).round=t,r.ceil=u,r.offset=i,r.range=s;var e=r.utc=Ct(r);return(e.floor=e).round=Ct(t),e.ceil=Ct(u),e.offset=Ct(i),e.range=function(t,e,n){try{var r=new(bt=kt);return r._=t,s(r,e,n)}finally{bt=Date}},r}function Ct(r){return function(t,e){try{var n=new(bt=kt);return n._=t,r(n,e)._}finally{bt=Date}}}function St(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,s=t.shortMonths;function c(u){var s=u.length;function t(t){for(var e,n,r,i=[],o=-1,a=0;++o<s;)37===u.charCodeAt(o)&&(i.push(u.slice(a,o)),null!=(n=Tt[e=u.charAt(++o)])&&(e=u.charAt(++o)),(r=w[e])&&(e=r(t,null==n?"e"===e?" ":"0":n)),i.push(e),a=o+1);return i.push(u.slice(a,o)),i.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(l(e,u,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&bt!==kt,r=new(n?kt:bt);return"j"in e?r.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(r.setFullYear(e.y,0,1),r.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(r.getDay()+5)%7:e.w+7*e.U-(r.getDay()+6)%7)):r.setFullYear(e.y,e.m,e.d),r.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?r._:r},t.toString=function(){return u},t}function l(t,e,n,r){for(var i,o,a,u=0,s=e.length,c=n.length;u<s;){if(c<=r)return-1;if(37===(i=e.charCodeAt(u++))){if(a=e.charAt(u++),!(o=b[a in Tt?e.charAt(u++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.multi=(c.utc=function(t){var n=c(t);function e(t){try{var e=new(bt=kt);return e._=t,n(e)}finally{bt=Date}}return e.parse=function(t){try{bt=kt;var e=n.parse(t);return e&&e._}finally{bt=Date}},e.toString=n.toString,e}).multi=Zt;var f=S.map(),h=It(o),d=Ft(o),p=It(a),g=Ft(a),v=It(u),m=Ft(u),y=It(s),_=Ft(s);i.forEach(function(t,e){f.set(t.toLowerCase(),e)});var w={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:c(e),d:function(t,e){return Nt(t.getDate(),e,2)},e:function(t,e){return Nt(t.getDate(),e,2)},H:function(t,e){return Nt(t.getHours(),e,2)},I:function(t,e){return Nt(t.getHours()%12||12,e,2)},j:function(t,e){return Nt(1+wt.dayOfYear(t),e,3)},L:function(t,e){return Nt(t.getMilliseconds(),e,3)},m:function(t,e){return Nt(t.getMonth()+1,e,2)},M:function(t,e){return Nt(t.getMinutes(),e,2)},p:function(t){return i[+(12<=t.getHours())]},S:function(t,e){return Nt(t.getSeconds(),e,2)},U:function(t,e){return Nt(wt.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Nt(wt.mondayOfYear(t),e,2)},x:c(n),X:c(r),y:function(t,e){return Nt(t.getFullYear()%100,e,2)},Y:function(t,e){return Nt(t.getFullYear()%1e4,e,4)},Z:Wt,"%":function(){return"%"}},b={a:function(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){h.lastIndex=0;var r=h.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return l(t,w.c.toString(),e,n)},d:zt,e:zt,H:Rt,I:Rt,j:jt,L:Bt,m:Ht,M:Ut,p:function(t,e,n){var r=f.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:Xt,U:Dt,w:Lt,W:Ot,x:function(t,e,n){return l(t,w.x.toString(),e,n)},X:function(t,e,n){return l(t,w.X.toString(),e,n)},y:Yt,Y:qt,Z:Pt,"%":$t};return c}wt.year=xt(function(t){return(t=wt.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),wt.years=wt.year.range,wt.years.utc=wt.year.utc.range,wt.day=xt(function(t){var e=new bt(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),wt.days=wt.day.range,wt.days.utc=wt.day.utc.range,wt.dayOfYear=function(t){var e=wt.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=wt[t]=xt(function(t){return(t=wt.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=wt.year(t).getDay();return Math.floor((wt.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});wt[t+"s"]=e.range,wt[t+"s"].utc=e.utc.range,wt[t+"OfYear"]=function(t){var e=wt.year(t).getDay();return Math.floor((wt.dayOfYear(t)+(e+n)%7)/7)}}),wt.week=wt.sunday,wt.weeks=wt.sunday.range,wt.weeks.utc=wt.sunday.utc.range,wt.weekOfYear=wt.sundayOfYear;var Tt={"-":"",_:" ",0:"0"},Et=/^\s*\d+/,At=/^%/;function Nt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function It(t){return new RegExp("^(?:"+t.map(S.requote).join("|")+")","i")}function Ft(t){for(var e=new y,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Lt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Dt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Ot(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function qt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Yt(t,e,n){Et.lastIndex=0;var r,i=Et.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(68<r?1900:2e3),n+i[0].length):-1}function Pt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ht(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function zt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function jt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Rt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ut(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Xt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Bt(t,e,n){Et.lastIndex=0;var r=Et.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Wt(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",r=M(e)/60|0,i=M(e)%60;return n+Nt(r,"0",2)+Nt(i,"0",2)}function $t(t,e,n){At.lastIndex=0;var r=At.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Zt(r){for(var t=r.length,e=-1;++e<t;)r[e][0]=this(r[e][0]);return function(t){for(var e=0,n=r[e];!n[1](t);)n=r[++e];return n[0](t)}}S.locale=function(t){return{numberFormat:(x=(e=t).decimal,u=e.thousands,s=e.grouping,r=e.currency,C=s&&u?function(t,e){for(var n=t.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),r.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=s[i=(i+1)%s.length];return r.reverse().join(u)}:m,function(t){var e=vt.exec(t),l=e[1]||" ",f=e[2]||">",h=e[3]||"-",n=e[4]||"",d=e[5],p=+e[6],g=e[7],v=e[8],m=e[9],y=1,_="",w="",b=!1,k=!0;switch(v=v&&+v.substring(1),(d||"0"===l&&"="===f)&&(d=l="0",f="="),m){case"n":g=!0,m="g";break;case"%":y=100,w="%",m="f";break;case"p":y=100,w="%",m="r";break;case"b":case"o":case"x":case"X":"#"===n&&(_="0"+m.toLowerCase());case"c":k=!1;case"d":b=!0,v=0;break;case"s":y=-1,m="r"}"$"===n&&(_=r[0],w=r[1]),"r"!=m||v||(m="g"),null!=v&&("g"==m?v=Math.max(1,Math.min(21,v)):"e"!=m&&"f"!=m||(v=Math.max(0,Math.min(20,v)))),m=mt.get(m)||yt;var M=d&&g;return function(t){var e=w;if(b&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===h?"":h;if(y<0){var r=S.formatPrefix(t,v);t=r.scale(t),e=r.symbol+w}else t*=y;var i,o,a=(t=m(t,v)).lastIndexOf(".");if(a<0){var u=k?t.lastIndexOf("e"):-1;o=u<0?(i=t,""):(i=t.substring(0,u),t.substring(u))}else i=t.substring(0,a),o=x+t.substring(a+1);!d&&g&&(i=C(i,1/0));var s=_.length+i.length+o.length+(M?0:n.length),c=s<p?new Array(s=p-s+1).join(l):"";return M&&(i=C(c+i,c.length?p-o.length:1/0)),n+=_,t=i+o,("<"===f?n+t+c:">"===f?c+n+t:"^"===f?c.substring(0,s>>=1)+n+t+c.substring(s):n+(M?t:c+t))+e}}),timeFormat:St(t)};var e,x,u,s,r,C};var Jt=S.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Vt(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}S.format=Jt.numberFormat;var Gt={floor:m,ceil:m};function Kt(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function Qt(o){return{left:function(t,e,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=t.length);n<r;){var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}return n},right:function(t,e,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=t.length);n<r;){var i=n+r>>>1;0<o(t[i],e)?r=i:n=1+i}return n}}}var te=Qt(S.ascending=Kt);function ee(n,t,e,r){var i=[],o=[],a=0,u=Math.min(n.length,t.length)-1;for(n[u]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<=u;)i.push(e(n[a-1],n[a])),o.push(r(t[a-1],t[a]));return function(t){var e=S.bisect(n,t,1,u)-1;return o[e](i[e](t))}}function ne(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function re(t,e){return c=ie(n=t,e)[2],r=c?{floor:function(t){return Math.floor(t/c)*c},ceil:function(t){return Math.ceil(t/c)*c}}:Gt,o=0,a=n.length-1,u=n[o],(s=n[a])<u&&(i=o,o=a,a=i,i=u,u=s,s=i),n[o]=r.floor(u),n[a]=r.ceil(s),n;var n,r,i,o,a,u,s,c}function ie(t,e){null==e&&(e=10);var n=ne(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function oe(t,e){return S.range.apply(S,ie(t,e))}function ae(t,e,n){var r,i,o,a=ie(t,e);if(n){var u=vt.exec(n);if(u.shift(),"s"===u[8]){var s=S.formatPrefix(Math.max(M(a[0]),M(a[1])));return u[7]||(u[7]="."+se(s.scale(a[2]))),u[8]="f",n=S.format(u.join("")),function(t){return n(s.scale(t))+s.symbol}}u[7]||(u[7]="."+(r=u[8],o=se((i=a)[2]),r in ue?Math.abs(o-se(Math.max(M(i[0]),M(i[1]))))+ +("e"!==r):o-2*("%"===r))),n=u.join("")}else n=",."+se(a[2])+"f";return S.format(n)}S.bisectLeft=te.left,S.bisect=S.bisectRight=te.right,S.bisector=function(n){return Qt(1===n.length?function(t,e){return Kt(n(t),e)}:n)},S.scale={},S.scale.linear=function(){return function t(n,r,i,o){var a,u;function e(){var t=2<Math.min(n.length,r.length)?ee:Vt,e=o?dt:ht;return a=t(n,r,e,i),u=t(r,n,e,lt),s}function s(t){return a(t)}s.invert=function(t){return u(t)};s.domain=function(t){return arguments.length?(n=t.map(Number),e()):n};s.range=function(t){return arguments.length?(r=t,e()):r};s.rangeRound=function(t){return s.range(t).interpolate(ft)};s.clamp=function(t){return arguments.length?(o=t,e()):o};s.interpolate=function(t){return arguments.length?(i=t,e()):i};s.ticks=function(t){return oe(n,t)};s.tickFormat=function(t,e){return ae(n,t,e)};s.nice=function(t){return re(n,t),e()};s.copy=function(){return t(n,r,i,o)};return e()}([0,1],[0,1],lt,!1)};var ue={s:1,g:1,p:1,r:1,e:1};function se(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ce(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}S.scale.pow=function(){return function t(e,n,r){var i=ce(n),o=ce(1/n);function a(t){return e(i(t))}a.invert=function(t){return o(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),a):r};a.ticks=function(t){return oe(r,t)};a.tickFormat=function(t,e){return ae(r,t,e)};a.nice=function(t){return a.domain(re(r,t))};a.exponent=function(t){return arguments.length?(i=ce(n=t),o=ce(1/n),e.domain(r.map(i)),a):n};a.copy=function(){return t(e.copy(),n,r)};return u=a,s=e,S.rebind(u,s,"range","rangeRound","interpolate","clamp");var u,s}(S.scale.linear(),1,[0,1])},S.scale.sqrt=function(){return S.scale.pow().exponent(.5)};var le={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function fe(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=he.length;n<r;++n){var i=he[n]+e;if(i in t)return i}}var he=["webkit","ms","moz","Moz","o","O"];function de(t){return le(t,ye),t}var pe=function(t,e){return e.querySelector(t)},ge=function(t,e){return e.querySelectorAll(t)},ve=g.matches||g[fe(g,"matchesSelector")],me=function(t,e){return ve.call(t,e)};"function"==typeof Sizzle&&(pe=function(t,e){return Sizzle(t,e)[0]||null},me=(ge=Sizzle).matchesSelector),S.selection=function(){return Re};var ye=S.selection.prototype=[];function _e(t){return"function"==typeof t?t:function(){return pe(t,this)}}function we(t){return"function"==typeof t?t:function(){return ge(t,this)}}ye.select=function(t){var e,n,r,i,o=[];t=_e(t);for(var a=-1,u=this.length;++a<u;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=-1,c=r.length;++s<c;)(i=r[s])?(e.push(n=t.call(i,i.__data__,s,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return de(o)},ye.selectAll=function(t){var e,n,r=[];t=we(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,s=a.length;++u<s;)(n=a[u])&&(r.push(e=d(t.call(n,n.__data__,u,i))),e.parentNode=n);return de(r)};var be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ke(e,n){return e=S.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Me(t){return t.trim().replace(/\s+/g," ")}function xe(t){return new RegExp("(?:^|\\s+)"+S.requote(t)+"(?:\\s+|$)","g")}function Ce(t){return(t+"").trim().split(/^|\s+/)}function Se(n,r){var i=(n=Ce(n).map(Te)).length;return"function"==typeof r?function(){for(var t=-1,e=r.apply(this,arguments);++t<i;)n[t](this,e)}:function(){for(var t=-1;++t<i;)n[t](this,r)}}function Te(r){var i=xe(r);return function(t,e){if(n=t.classList)return e?n.add(r):n.remove(r);var n=t.getAttribute("class")||"";e?(i.lastIndex=0,i.test(n)||t.setAttribute("class",Me(n+" "+r))):t.setAttribute("class",Me(n.replace(i," ")))}}function Ee(e,n,r){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}:function(){this.style.setProperty(e,n,r)}}function Ae(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function Ne(t){return"function"==typeof t?t:(t=S.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function Ie(t){return{__data__:t}}function Fe(t){return function(){return me(this,t)}}function Le(){}function De(i,e,n){var r="__on"+i,t=i.indexOf("."),o=qe;0<t&&(i=i.slice(0,t));var a=Oe.get(i);function u(){var t=this[r];t&&(this.removeEventListener(i,t,t.$),delete this[r])}return a&&(i=a,o=Ye),t?e?function(){var t=o(e,d(arguments));u.call(this),this.addEventListener(i,this[r]=t,t.$=n),t._=e}:u:e?Le:function(){var t,e=new RegExp("^__on([^.]+)"+S.requote(i)+"$");for(var n in this)if(t=n.match(e)){var r=this[n];this.removeEventListener(t[1],r,r.$),delete this[n]}}}S.ns={prefix:be,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&(n=t.slice(0,e),t=t.slice(e+1)),be.hasOwnProperty(n)?{space:be[n],local:t}:t}},ye.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=S.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(ke(e,t[e]));return this}return this.each(ke(t,e))},ye.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=Ce(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!xe(t[i]).test(e))return!1;return!0}for(e in t)this.each(Se(e,t[e]));return this}return this.each(Se(t,e))},ye.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(Ee(n,t[n],e));return this}if(r<2)return v.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(Ee(t,e,n))},ye.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(Ae(e,t[e]));return this}return this.each(Ae(t,e))},ye.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},ye.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},ye.append=function(t){return t=Ne(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ye.insert=function(t,e){return t=Ne(t),e=_e(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ye.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},ye.data=function(t,p){var e,n,r=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(e=this[0]).length);++r<i;)(n=e[r])&&(t[r]=n.__data__);return t}function o(t,e){var n,r,i,o=t.length,a=e.length,u=Math.min(o,a),s=new Array(a),c=new Array(a),l=new Array(o);if(p){var f,h=new y,d=new Array(o);for(n=-1;++n<o;)h.has(f=p.call(r=t[n],r.__data__,n))?l[n]=r:h.set(f,r),d[n]=f;for(n=-1;++n<a;)(r=h.get(f=p.call(e,i=e[n],n)))?!0!==r&&((s[n]=r).__data__=i):c[n]=Ie(i),h.set(f,!0);for(n=-1;++n<o;)!0!==h.get(d[n])&&(l[n]=t[n])}else{for(n=-1;++n<u;)r=t[n],i=e[n],r?(r.__data__=i,s[n]=r):c[n]=Ie(i);for(;n<a;++n)c[n]=Ie(e[n]);for(;n<o;++n)l[n]=t[n]}c.update=s,c.parentNode=s.parentNode=l.parentNode=t.parentNode,g.push(c),v.push(s),m.push(l)}var g=He([]),v=de([]),m=de([]);if("function"==typeof t)for(;++r<i;)o(e=this[r],t.call(e,e.parentNode.__data__,r));else for(;++r<i;)o(e=this[r],t);return v.enter=function(){return g},v.exit=function(){return m},v},ye.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ye.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=Fe(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var u=0,s=n.length;u<s;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return de(i)},ye.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];0<=--i;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},ye.sort=function(t){t=function(n){arguments.length||(n=Kt);return function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},S.event=null,ye.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(De(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(De(t,e,n))};var Oe=S.map({mouseenter:"mouseover",mouseleave:"mouseout"});function qe(n,r){return function(t){var e=S.event;S.event=t,r[0]=this.__data__;try{n.apply(this,r)}finally{S.event=e}}}function Ye(t,e){var n=qe(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function Pe(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,u=o.length;a<u;a++)(i=o[a])&&e(i,a,n);return t}function He(t){return le(t,ze),t}Oe.forEach(function(t){"on"+t in p&&Oe.remove(t)}),ye.each=function(r){return Pe(this,function(t,e,n){r.call(t,t.__data__,e,n)})},ye.call=function(t){var e=d(arguments);return t.apply(e[0]=this,e),this},ye.empty=function(){return!this.node()},ye.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},ye.size=function(){var t=0;return Pe(this,function(){++t}),t};var ze=[];function je(){var t=this.__transition__;t&&++t.active}S.selection.enter=He,(S.selection.enter.prototype=ze).append=ye.append,ze.empty=ye.empty,ze.node=ye.node,ze.call=ye.call,ze.size=ye.size,ze.select=function(t){for(var e,n,r,i,o,a=[],u=-1,s=this.length;++u<s;){r=(i=this[u]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(e.push(r[c]=n=t.call(i.parentNode,o.__data__,c,u)),n.__data__=o.__data__):e.push(null)}return de(a)},ze.insert=function(t,e){var a,u,s;return arguments.length<2&&(a=this,e=function(t,e,n){var r,i=a[n].update,o=i.length;for(n!=s&&(s=n,u=0),u<=e&&(u=e+1);!(r=i[u])&&++u<o;);return r}),ye.insert.call(this,t,e)},ye.transition=function(){for(var t,e,n=tn||++rn,r=[],i=en||{time:Date.now(),ease:_n,delay:0,duration:250},o=-1,a=this.length;++o<a;){r.push(t=[]);for(var u=this[o],s=-1,c=u.length;++s<c;)(e=u[s])&&xn(e,s,n,i),t.push(e)}return Qe(r,n)},ye.interrupt=function(){return this.each(je)},S.select=function(t){var e=["string"==typeof t?pe(t,p):t];return e.parentNode=g,de([e])},S.selectAll=function(t){var e=d("string"==typeof t?ge(t,p):t);return e.parentNode=g,de([e])};var Re=S.select(g);function Ue(){return!0}var Xe,Be,We,$e,Ze,Je=v[fe(v,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ve(){var t=Ge(),e=Ke()-t;24<e?(isFinite(e)&&(clearTimeout($e),$e=setTimeout(Ve,e)),We=0):(We=1,Je(Ve))}function Ge(){var t=Date.now();for(Ze=Xe;Ze;)t>=Ze.t&&(Ze.f=Ze.c(t-Ze.t)),Ze=Ze.n;return t}function Ke(){for(var t,e=Xe,n=1/0;e;)e=e.f?t?t.n=e.n:Xe=e.n:(e.t<n&&(n=e.t),(t=e).n);return Be=t,n}function Qe(t,e){return le(t,nn),t.id=e,t}S.timer=function(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,f:!1,n:null};Be?Be.n=i:Xe=i,Be=i,We||($e=clearTimeout($e),We=1,Je(Ve))},S.timer.flush=function(){Ge(),Ke()};var tn,en,nn=[],rn=0;function on(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=un(i),u=an(i,o),s=un(((e=o)[0]+=(r=-u)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,u*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*L,this.translate=[t.e,t.f],this.scale=[a,s],this.skew=s?Math.atan2(u,s)*L:0}function an(t,e){return t[0]*e[0]+t[1]*e[1]}function un(t){var e=Math.sqrt(an(t,t));return e&&(t[0]/=e,t[1]/=e),e}nn.call=ye.call,nn.empty=ye.empty,nn.node=ye.node,nn.size=ye.size,S.transition=function(t){return arguments.length?tn?t.transition():t:Re.transition()},(S.transition.prototype=nn).select=function(t){var e,n,r,i=this.id,o=[];t=_e(t);for(var a=-1,u=this.length;++a<u;){o.push(e=[]);for(var s=this[a],c=-1,l=s.length;++c<l;)(r=s[c])&&(n=t.call(r,r.__data__,c,a))?("__data__"in r&&(n.__data__=r.__data__),xn(n,c,i,r.__transition__[i]),e.push(n)):e.push(null)}return Qe(o,i)},nn.selectAll=function(t){var e,n,r,i,o,a=this.id,u=[];t=we(t);for(var s=-1,c=this.length;++s<c;)for(var l=this[s],f=-1,h=l.length;++f<h;)if(r=l[f]){o=r.__transition__[a],n=t.call(r,r.__data__,f,s),u.push(e=[]);for(var d=-1,p=n.length;++d<p;)(i=n[d])&&xn(i,d,a,o),e.push(i)}return Qe(u,a)},nn.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=Fe(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,u=0,s=(a=this[i]).length;u<s;u++)(n=a[u])&&t.call(n,n.__data__,u,i)&&e.push(n)}return Qe(r,this.id)},S.transform=function(t){var n=p.createElementNS(S.ns.prefix.svg,"g");return(S.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new on(e?e.matrix:sn)})(t)},on.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sn={a:1,b:0,c:0,d:1,e:0,f:0};function cn(t,e){var r,i=[],o=[],n=S.transform(t),a=S.transform(e),u=n.translate,s=a.translate,c=n.rotate,l=a.rotate,f=n.skew,h=a.skew,d=n.scale,p=a.scale;return u[0]!=s[0]||u[1]!=s[1]?(i.push("translate(",null,",",null,")"),o.push({i:1,x:at(u[0],s[0])},{i:3,x:at(u[1],s[1])})):s[0]||s[1]?i.push("translate("+s+")"):i.push(""),c!=l?(180<c-l?l+=360:180<l-c&&(c+=360),o.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:at(c,l)})):l&&i.push(i.pop()+"rotate("+l+")"),f!=h?o.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:at(f,h)}):h&&i.push(i.pop()+"skewX("+h+")"),d[0]!=p[0]||d[1]!=p[1]?(r=i.push(i.pop()+"scale(",null,",",null,")"),o.push({i:r-4,x:at(d[0],p[0])},{i:r-2,x:at(d[1],p[1])})):1==p[0]&&1==p[1]||i.push(i.pop()+"scale("+p+")"),r=o.length,function(t){for(var e,n=-1;++n<r;)i[(e=o[n]).i]=e.x(t);return i.join("")}}function ln(t,r,i,o){var a=t.id;return Pe(t,"function"==typeof i?function(t,e,n){t.__transition__[a].tween.set(r,o(i.call(t,t.__data__,e,n)))}:(i=o(i),function(t){t.__transition__[a].tween.set(r,i)}))}function fn(t){return null==t&&(t=""),function(){this.textContent=t}}S.interpolateTransform=cn,nn.tween=function(e,n){var r=this.id;return arguments.length<2?this.node().__transition__[r].tween.get(e):Pe(this,null==n?function(t){t.__transition__[r].tween.remove(e)}:function(t){t.__transition__[r].tween.set(e,n)})},nn.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var r="transform"==t?cn:lt,i=S.ns.qualify(t);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return ln(this,"attr."+t,e,i.local?function(n){return null==n?a:(n+="",function(){var e,t=this.getAttributeNS(i.space,i.local);return t!==n&&(e=r(t,n),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(n){return null==n?o:(n+="",function(){var e,t=this.getAttribute(i);return t!==n&&(e=r(t,n),function(t){this.setAttribute(i,e(t))})})})},nn.attrTween=function(t,r){var i=S.ns.qualify(t);return this.tween("attr."+t,i.local?function(t,e){var n=r.call(this,t,e,this.getAttributeNS(i.space,i.local));return n&&function(t){this.setAttributeNS(i.space,i.local,n(t))}}:function(t,e){var n=r.call(this,t,e,this.getAttribute(i));return n&&function(t){this.setAttribute(i,n(t))}})},nn.style=function(r,t,i){var e=arguments.length;if(e<3){if("string"!=typeof r){for(i in e<2&&(t=""),r)this.style(i,r[i],t);return this}i=""}function o(){this.style.removeProperty(r)}return ln(this,"style."+r,t,function(n){return null==n?o:(n+="",function(){var e,t=v.getComputedStyle(this,null).getPropertyValue(r);return t!==n&&(e=lt(t,n),function(t){this.style.setProperty(r,e(t),i)})})})},nn.styleTween=function(r,i,o){return arguments.length<3&&(o=""),this.tween("style."+r,function(t,e){var n=i.call(this,t,e,v.getComputedStyle(this,null).getPropertyValue(r));return n&&function(t){this.style.setProperty(r,n(t),o)}})},nn.text=function(t){return ln(this,"text",t,fn)},nn.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})};function hn(){return m}var dn=S.map({linear:hn,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return mn},cubic:function(){return yn},sin:function(){return wn},exp:function(){return bn},circle:function(){return kn},elastic:function(e,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/N*Math.asin(1/e):(e=1,n/4);return function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-r)*N/n)}},back:function(e){e=e||1.70158;return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Mn}}),pn=S.map({in:m,out:gn,"in-out":vn,"out-in":function(t){return vn(gn(t))}});function gn(e){return function(t){return 1-e(1-t)}}function vn(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function mn(t){return t*t}function yn(t){return t*t*t}function _n(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function wn(t){return 1-Math.cos(t*I)}function bn(t){return Math.pow(2,10*(t-1))}function kn(t){return 1-Math.sqrt(1-t*t)}function Mn(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function xn(l,f,h,t){var d=l.__transition__||(l.__transition__={active:0,count:0}),p=d[h];if(!p){var g=t.time;p=d[h]={tween:new y,time:g,ease:t.ease,delay:t.delay,duration:t.duration},++d.count,S.timer(function(t){var i=l.__data__,o=p.ease,e=p.delay,a=p.duration,n=Ze,u=[];if(n.t=e+g,e<=t)return r(t-e);function r(t){if(d.active>h)return c();d.active=h,p.event&&p.event.start.call(l,i,f),p.tween.forEach(function(t,e){(e=e.call(l,i,f))&&u.push(e)}),S.timer(function(){return n.c=s(t||1)?Ue:s,1},0,g)}function s(t){if(d.active!==h)return c();for(var e=t/a,n=o(e),r=u.length;0<r;)u[--r].call(l,n);return 1<=e?(p.event&&p.event.end.call(l,i,f),c()):void 0}function c(){return--d.count?delete d[h]:delete l.__transition__,1}n.c=r},0,g)}}S.ease=function(t){var e,n=t.indexOf("-"),r=0<=n?t.slice(0,n):t,i=0<=n?t.slice(n+1):"in";return r=dn.get(r)||hn,i=pn.get(i)||m,e=i(r.apply(null,h.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},nn.ease=function(e){var n=this.id;return arguments.length<1?this.node().__transition__[n].ease:("function"!=typeof e&&(e=S.ease.apply(S,arguments)),Pe(this,function(t){t.__transition__[n].ease=e}))},nn.delay=function(r){var i=this.id;return arguments.length<1?this.node().__transition__[i].delay:Pe(this,"function"==typeof r?function(t,e,n){t.__transition__[i].delay=+r.call(t,t.__data__,e,n)}:(r=+r,function(t){t.__transition__[i].delay=r}))},nn.duration=function(r){var i=this.id;return arguments.length<1?this.node().__transition__[i].duration:Pe(this,"function"==typeof r?function(t,e,n){t.__transition__[i].duration=Math.max(1,r.call(t,t.__data__,e,n))}:(r=Math.max(1,r),function(t){t.__transition__[i].duration=r}))},nn.each=function(r,n){var i=this.id;if(arguments.length<2){var t=en,e=tn;tn=i,Pe(this,function(t,e,n){en=t.__transition__[i],r.call(t,t.__data__,e,n)}),en=t,tn=e}else Pe(this,function(t){var e=t.__transition__[i];(e.event||(e.event=S.dispatch("start","end"))).on(r,n)});return this},nn.transition=function(){for(var t,e,n,r=this.id,i=++rn,o=[],a=0,u=this.length;a<u;a++){o.push(t=[]);for(var s,c=0,l=(s=this[a]).length;c<l;c++)(e=s[c])&&((n=Object.create(e.__transition__[r])).delay+=n.duration,xn(e,c,i,n)),t.push(e)}return Qe(o,i)},"function"==typeof define&&define.amd?define(S):"object"==typeof module&&module.exports&&(module.exports=S),this.d3=S}();var deviceIsAndroid=0<navigator.userAgent.indexOf("Android"),deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),deviceIsBlackBerry10=0<navigator.userAgent.indexOf("BB10");FastClick.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){"use strict";var n,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},FastClick.prototype.determineEventType=function(t){"use strict";return deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(t){"use strict";var e;deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){"use strict";var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){"use strict";var e,n,r;if(1<t.targetTouches.length)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],deviceIsIOS){if((r=window.getSelection()).rangeCount&&!r.isCollapsed)return!0;if(!deviceIsIOS4){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},FastClick.prototype.onTouchMove=function(t){"use strict";return this.trackingClick&&(this.targetElement===this.getTargetElementFromEventTarget(t.target)&&!this.touchHasMoved(t)||(this.trackingClick=!1,this.targetElement=null)),!0},FastClick.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){"use strict";var e,n,r,i,o,a=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(o=t.changedTouches[0],(a=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||a).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(r=a.tagName.toLowerCase())){if(e=this.findControl(a)){if(this.focus(a),deviceIsAndroid)return!1;a=e}}else if(this.needsFocus(a))return 100<t.timeStamp-n||deviceIsIOS&&window.top!==window&&"input"===r?this.targetElement=null:(this.focus(a),this.sendClick(a,t),deviceIsIOS&&"select"===r||(this.targetElement=null,t.preventDefault())),!1;return!(!deviceIsIOS||deviceIsIOS4||!(i=a.fastClickScrollParent)||i.fastClickLastScrollTop===i.scrollTop)||(this.needsClick(a)||(t.preventDefault(),this.sendClick(a,t)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){"use strict";return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},FastClick.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){"use strict";var t=this.layer;deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){"use strict";var e,n,r;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(31<n&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&10<=(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=r[2]&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction},FastClick.attach=function(t,e){"use strict";return new FastClick(t,e)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,window.gitdRomeHotels=window.gitdRomeHotels||{},function(){"use strict";function t(){a=window.innerWidth-2*b,s=d3.scale.linear().range([0,a]),c=d3.scale.linear().range([M,0]),p.attr("width",a+2*b).attr("height",M+2*k)}function e(){p=d3.selectAll("#chart").append("svg"),(g=p.append("g").attr("transform","translate("+b+","+k+")")).append("clipPath").attr("id","circle_mask").append("circle").attr("r",256),t(),(l=d3.scale.sqrt().range([.4,4])).domain([d3.min(u,function(t){return t.size}),d3.max(u,function(t){return t.size})]),h=g.append("line").attr("class","regression-line").attr("x1",0).attr("y1",M).attr("x2",0).attr("y2",M),(d=g.selectAll(".dot").data(u,function(t){return t.code}).enter().append("g").attr("class","dot")).append("image").attr("xlink:href",function(t){return"flags/"+t.code+".svg"}).attr("x",-256).attr("y",-256).attr("width",512).attr("height",512).attr("transform","scale( "+x/512*2+" )").attr("clip-path","url(#circle_mask)"),f=d3.select(".chart-area").append("div").attr("class","tooltip").style("opacity",0),d.on("mouseover",function(t){var e,n,r=d3.transform(d3.select(d3.event.target.parentElement).attr("transform")).translate;f.transition().duration(200).style("opacity",1),f.html((n="<h2>"+(e=t).country+"</h2>",C&&(n+="<p>Tourists per year<strong>"+i(e.arrivals_total)+"</strong></p>"),n+="<p>Average "+("stays"===y?"stay":" hotel stars")+"<strong>"+Math.floor(10*e[y])/10+("stays"===y?" <span>nights</span>":"")+"</strong></p>","gini"===_?n+="<p>Inequality ( Gini ) index<strong>"+Math.floor(e.gini)+"</strong></p>":"distance"===_?n+="<p>Distance from Rome<strong>"+i(e.distance)+" <span>Km</span></strong></p>":"gdp_procapita"===_&&(n+="<p>Income per capita<strong>"+i(e.gdp_procapita)+" <span>$ / year</span></strong></p>"),n)).style("top",r[1]+3*x+k+"px").classed("tooltip-right",!1).classed("tooltip-left",!1),r[0]<50?f.classed("tooltip-right",!0).style("left",r[0]-85+b+50+"px"):r[0]>a-50?f.classed("tooltip-left",!0).style("left",r[0]-85+b-50+"px"):f.style("left",r[0]-85+b+"px")}).on("mouseout",function(t){f.transition().duration(500).style("opacity",0)})}function n(t,e){void 0!==t&&void 0!==e&&(y=t,_=e);function i(t){return t[y]}function n(t){return t[_]}function o(t){return"translate("+s(i(t))+","+c(n(t))+"), scale("+(C?l(t.size):1)+")"}s.domain([d3.min(u,i),d3.max(u,i)]),c.domain([d3.min(u,n),d3.max(u,n)]);var r=function(t,e){var n,r={},i=t.length,o=0,a=0,u=0,s=0,c=0;for(n=0;n<i;n++)o+=e[n],a+=t[n],u+=e[n]*t[n],s+=e[n]*e[n],c+=t[n]*t[n];return r.slope=(i*u-o*a)/(i*s-o*o),r.intercept=(a-r.slope*o)/i,r.r2=Math.pow((i*u-o*a)/Math.sqrt((i*s-o*o)*(i*c-a*a)),2),r}(u.map(function(t){return t[_]}),u.map(function(t){return t[y]})),a=d3.max(u,function(t){return t[y]});h.transition().duration(1e3).attr("x1",b+s(0)).attr("y1",c(r.intercept)).attr("x2",b+s(a)).attr("y2",c(a*r.slope+r.intercept)),d=g.selectAll(".dot").data(u,function(t){return t.code}).each(function(t,e){var n=d3.transform(d3.select(this).attr("transform")).translate,r=1e3;0===n[0]&&0===n[1]&&(d3.select(this).attr("transform",function(t){return"translate("+s(i(t))+","+(M+2*k+x)+")"}),r=1600),d3.select(this).transition().duration(r).attr("transform",o)}),v.textContent=S[y],m.textContent=S[_]}function i(t){return t<1e3?"< 1,000":t<5e3?(Math.round(t/100)/10).toFixed(1).replace(".",",")+"00":t<1e6?String(Math.floor(t/1e3)).replace(".",",")+",000":(Math.floor(t/1e5)/10).toFixed(1).replace(".",",")+"00,000"}function r(t){Array.prototype.forEach.call(document.querySelectorAll(".chart-metrics-btn"),function(t,e){t.classList.remove("selected")}),t.classList.add("selected")}function o(){t(),n()}var u,a,s,c,l,f,h,d,p,g,v,m,y,_,w,b,k,M,x,C,S;window.gitdRomeHotels.chart=(b=40,M=400-2*(k=25),C=!(x=15),S={gini:"Country Inequality",distance:"Distance from Rome",gdp_procapita:"Income per capita",stars:"Hotel Stars",stays:"Length of Stay"},{setup:function(t){v=document.querySelector("#chartXAxis"),m=document.querySelector("#chartYAxis"),u=t,e(),r(document.querySelector("#btnDistanceStars")),n("stars","distance"),document.querySelector("#btnDistanceStars").addEventListener("click",function(){r(this),n("stars","distance")}),document.querySelector("#btnDistanceStays").addEventListener("click",function(){r(this),n("stays","distance")}),document.querySelector("#btnGDPStays").addEventListener("click",function(){r(this),n("stays","gdp_procapita")}),document.querySelector("#btnGiniStars").addEventListener("click",function(){r(this),n("stars","gini")}),document.querySelector("#btnSizes").addEventListener("click",function(){C=this.classList.contains("selected")?(this.classList.remove("selected"),!1):(this.classList.add("selected"),!0),n()}),window.addEventListener("resize",function(){clearTimeout(w),w=setTimeout(o,500)})}})}(),window.gitdRomeHotels=window.gitdRomeHotels||{},function(e){"use strict";e.main={init:function(t){e.chart.setup(t)}},document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body),d3.csv("data/hotels.csv",function(t){var n,r,i=[];t.map(function(t){for(var e in r={},t)r[e]="country"!==e&&"code"!==e?+t[e]:t[e];"total"===r.code&&(n=r.arrivals_total),r.stars=r.arrivals_1/r.arrivals_total+r.arrivals_2/r.arrivals_total*2+r.arrivals_3/r.arrivals_total*3+r.arrivals_4/r.arrivals_total*4+r.arrivals_5/r.arrivals_total*5,r.stays=r.stays_total/r.arrivals_total,r.size=r.arrivals_total/n,"total"!==r.code&&i.push(r)}),i.sort(function(t,e){return t.size<e.size?1:t.size>e.size?-1:0}),e.main.init(i)})})}(window.gitdRomeHotels);